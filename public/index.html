<!DOCTYPE html>
<html data-ng-app="HRUI" data-ng-controller="HRUIController">

<head>
    <title>HRUI</title>
    <meta charset="UTF-8">
    <meta name="description" content="HTML5 Robot User Interface">
    <meta name="author" content="Daniel Peiró">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
</head>

<body>
    <div id="body" class="frame">
        <div id="toolbar" class="frame">
            <input id="joystickCheckbox" type="checkbox" data-ng-model="joystickOn" data-ng-click="updateControls($event, joystickOn)"> Joystick {{ joystickOn | OnOff}}
            <input id="dataMonitorCheckbox" type="checkbox" data-ng-model="dataMonitorOn" data-ng-click="updateControls($event, dataMonitorOn)"> Data Monitor {{ dataMonitorOn | OnOff}}
            <input id="liveVideoCheckbox" type="checkbox" data-ng-model="liveVideoOn" data-ng-click="updateControls($event, liveVideoOn)"> Live Video {{ liveVideoOn | OnOff}}
            <input id="geolocationCheckbox" type="checkbox" data-ng-model="geolocationOn" data-ng-click="updadivteControls($event, geolocationOn)"> Geolocation {{ geolocationOn | OnOff}}
            <input id="customDataCheckbox" type="checkbox" data-ng-model="customDataOn" data-ng-click="updateControls($event, customDataOn)"> Custom Data {{ customDataOn | OnOff}}
            <input id="customInputCheckbox" type="checkbox" data-ng-model="customInputOn" data-ng-click="updateControls($event, customInputOn)"> Custom Input {{ customInputOn | OnOff}}
            <input id="sshClientCheckbox" type="checkbox" data-ng-model="sshClientOn" data-ng-click="updateControls($event, sshClientOn)"> SSH Client {{ sshClientOn | OnOff}}
            <button class="menubutton" data-ng-click="optionsClick()">&#9776;</button>
        </div>
        <canvas id="videoCanvas" class="canvas" data-ng-controller="LiveVideoController" data-ng-if="liveVideoOn"></canvas>
        <div id="geolocationFrame" class="frame" data-ng-controller="GeolocationController" data-ng-if="geolocationOn"></div>
        <div id="joystickFrame" class="frame" data-ng-controller="JoystickController" data-ng-if="joystickOn">
            <canvas id="joystick" class="canvas" data-touch width=300 height=300>
                Canvas not supported
            </canvas>
            <canvas id="vector" class="canvas" data-ng-show="showVector" width=100 height=100>
                Canvas not supported
            </canvas>
            <br>
            <span class="coord">X:{{point.x.toFixed(2)}} Y:{{point.y.toFixed(2)}}</span>
            <br>
            <form class="form">
                <table>
                    <tr>
                        <td>
                            <input name="Lock Mode" type="radio" data-ng-model="lockMode" data-value="fullAnalog">Full Analog
                        </td>
                        <td>
                            <input name="Lock Mode" type="radio" data-ng-model="lockMode" data-value="lock8ways">8-Way
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input name="Lock Mode" type="radio" data-ng-model="lockMode" data-value="lock4ways">4-Way
                        </td>
                        <td>
                            <input name="Lock Mode" type="radio" data-ng-model="lockMode" data-value="lock2ways">2-Way
                        </td>
                    </tr>
                </table>
                <input name="Lock Joystick" type="checkbox" data-ng-model="lockJoystick" data-ng-change="resetAll()"> Lock Joystick in Position
                <br>
                <input name="Display Vector" type="checkbox" data-ng-model="showVector"> Display Vector
                <br>
            </form>
        </div>
        <div id="dataFrame" class="frame" data-ng-controller="DataController" data-ng-if="dataMonitorOn">
            <canvas id="mapcanvas" class="canvas" width="300" height="300"></canvas>
            <table id="dataTable" class="table">
                <tr>
                    <th>Position</th>
                    <th>Orientation</th>
                    <th>Speed</th>
                    <th>Angular Speed</th>
                </tr>
                <tr>
                    <td>x: {{position.x.toFixed(3)}}</td>
                    <td>&alpha;: {{orientation.alpha.toFixed(3)}}</td>
                    <td>v<sub>x</sub>: {{speed.vx.toFixed(3)}}</td>
                    <td>&alpha;&#775;: {{angularSpeed.dAlpha.toFixed(3)}}</td>
                </tr>
                <tr>
                    <td>y: {{position.y.toFixed(3)}}</td>
                    <td>&beta;: {{orientation.beta.toFixed(3)}}</td>
                    <td>v<sub>y</sub>: {{speed.vy.toFixed(3)}}</td>
                    <td>&beta;&#775;: {{angularSpeed.dBeta.toFixed(3)}}</td>
                </tr>
                <tr>
                    <td>z: {{position.z.toFixed(3)}}</td>
                    <td>&gamma;: {{orientation.gamma.toFixed(3)}}</td>
                    <td>v<sub>z</sub>: {{speed.vz.toFixed(3)}}</td>
                    <td>&gamma;&#775;: {{angularSpeed.dGamma.toFixed(3)}}</td>
                </tr>
            </table>
            <form id="mapscaleForm" class="form">
                Map Scale:
                <input id="mapscale" type="number" data-ng-model="scale">
            </form>
        </div>
        <div id="customDataFrame" class="frame" data-ng-controller="CustomDataController" data-ng-if="customDataOn">
            <form id="customDataForm" class="form" data-ng-if="!customDataFormSubmitted">
                Item Name:
                <input type="text" data-ng-model="customDataRequest.item">
                <br> Update interval (ms):
                <input type="number" data-ng-model="customDataRequest.updateInterval">
                <br>
                <input type="submit" value="Submit" data-ng-click="customDataFormSubmit()">
            </form>
            <span data-ng-if="customDataFormSubmitted">
                Requested item: {{customDataRequest.item}}
                <br> Requested interval: {{customDataRequest.updateInterval}}ms (rounded to 100ms)
                <br>
                </span>
            <table id="customDataTable" class="table" data-ng-bind-html="customDataTable" data-ng-if="customDataFormSubmitted"></table>

        </div>
        <div id="customInputFrame" class="frame" data-ng-controller="CustomInputController" data-ng-if="customInputOn">
            <form id="customInputSelectionForm" class="form" data-ng-if="!customInputSelectionSubmitted" data-ng-submit="customInputSelectionSubmit()">
                Item Name:
                <input type="text" data-ng-model="customInputRequest.item" required>
                <br> Number of Inputs:
                <input type="number" data-ng-model="customInputRequest.numberOfInputs" min="1" max="50" required>
                <br>
                <input type="submit" value="Submit">
            </form>
            <form id="customInputForm" data-ng-if="customInputSelectionSubmitted && !customInputFormSubmitted" data-ng-submit="customInputFormSubmit()">
                Input item: {{customInputRequest.item}}
                <br>
                <p data-ng-if="customInputSelectionSubmitted" data-ng-repeat="input in customInputList">Input {{$index+1}} Name:
                    <input type="text" data-ng-model="input.name" data-ng-pattern="/^[a-zA-Z0-9-_]*$/" required> Type:
                    <select data-ng-model="input.type" required>
                        <option value="">Select...</option>
                        <option value="text">Text</option>
                        <option value="range">Slider</option>
                        <option value="number">Number</option>
                        <option value="checkbox">Checkbox</option>
                    </select>
                    <span data-ng-if="input.type=='range' || input.type=='number'">
                        Min:<input type="number" data-ng-model="input.min" data-ng-required="input.type=='range'">
                        Max:<input type="number" data-ng-model="input.max" data-ng-required="input.type=='range'">
                    </span>
                </p>
                <input type="submit" value="Submit">
                <span class="smalltext" data-ng-show="!dataIsValid">Valid Names: Start with letter or _. No Symbols (except _) or Spaces. Unique; Ranges Min &lt; Max.</span>
            </form>
            <span data-ng-if="customInputFormSubmitted">
                Input item: {{customInputRequest.item}}
                <br>
            </span>
            <table id="customInputTable" class="table" data-compile="customInputTable" data-ng-if="customInputFormSubmitted"></table>

            <span data-ng-show="customInputFormSubmitted">
            <input id="autoUpdate" type="checkbox" data-ng-model="autoUpdateOn" >Auto Send All on change {{ autoUpdateOn | OnOff}}
            <br>
            <button data-ng-click="inputChanged($event)">Send Input</button>
            </span>
        </div>
        <div id="sshClientFrame" class="frame" data-ng-controller="SSHClientController" data-ng-if="sshClientOn"></div>
        <footer class="footer">
            <a href="http://www.w3.org/html/logo/">
                <img src="http://www.w3.org/html/logo/badge/html5-badge-h-connectivity-css3-graphics-multimedia-semantics.png" width="130" height="32" alt="HTML5 Powered with Connectivity / Realtime, CSS3 / Styling, Graphics, 3D &amp; Effects, Multimedia, and Semantics" title="HTML5 Powered with Connectivity / Realtime, CSS3 / Styling, Graphics, 3D &amp; Effects, Multimedia, and Semantics">
            </a>
            <h6>By Daniel Peiró (except where credited in source)<a href="http://github.com/xpeiro/HTML5RUI">Github Repo</a></h6>
        </footer>
        <script type="text/javascript" src="javascripts/socket.io.min.js"></script>
        <script type="text/javascript" src="javascripts/angular.min.js"></script>
        <script type="text/javascript" src="javascripts/angular-sanitize.min.js"></script>
        <script type="text/javascript" src="javascripts/angularapp.js"></script>
        <script type="text/javascript" src="javascripts/angularservices.js"></script>
        <script data-ng-if="joystickOn" type="text/javascript" src="javascripts/joystick.js"></script>
        <script data-ng-if="dataMonitorOn" type="text/javascript" src="javascripts/datamonitor.js"></script>
        <!-- jsmpeg by Dominic Szablewski - phoboslab.org, github.com/phoboslab -->
        <script data-ng-if="liveVideoOn" type="text/javascript" src="javascripts/jsmpg.min.js"></script>
        <script data-ng-if="liveVideoOn" type="text/javascript" src="javascripts/livevideo.js"></script>
        <script data-ng-if="geolocationOn" type="text/javascript" src="http://maps.googleapis.com/maps/api/js">
        </script>
        <script data-ng-if="geolocationOn" type="text/javascript" src="javascripts/geolocation.js"></script>
        <script data-ng-if="customDataOn" type="text/javascript" src="javascripts/customdata.js"></script>
        <script data-ng-if="customInputOn" type="text/javascript" src="javascripts/custominput.js"></script>
        <script data-ng-if="sshClientOn" type="text/javascript" src="javascripts/sshclient.js"></script>
    </div>
</body>

</html>
